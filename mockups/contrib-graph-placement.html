<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contribution Graph Placement Mockup</title>
<style>
/* ============================================================
   CSS CUSTOM PROPERTIES (matched from v3-diff-view-evolved.html)
   ============================================================ */
:root {
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --bg-tertiary: #21262d;
  --bg-hover: #30363d;
  --border-primary: #30363d;
  --border-secondary: #21262d;
  --border-accent: #58a6ff;

  --diff-red-bg: #2a1215;
  --diff-red-bg-highlight: #3d1a1e;
  --diff-red-accent: #f85149;
  --diff-red-border: #f8514966;
  --diff-green-bg: #0f2318;
  --diff-green-bg-highlight: #163d28;
  --diff-green-accent: #3fb950;
  --diff-green-border: #3fb95066;

  --text-primary: #e6edf3;
  --text-secondary: #b1bac4;
  --text-tertiary: #8b949e;
  --text-muted: #6e7681;
  --text-link: #58a6ff;
  --text-accent: #d2a8ff;

  --font-mono: 'SF Mono', 'Cascadia Code', 'Fira Code', 'JetBrains Mono', Consolas, monospace;
  --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.8125rem;
  --font-size-base: 0.9375rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.5rem;
  --font-size-2xl: 2rem;
  --font-size-3xl: 2.75rem;
  --line-height-tight: 1.3;
  --line-height-normal: 1.6;

  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;

  --content-max-width: 960px;
  --transition-fast: 150ms ease;
  --transition-normal: 250ms ease;
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
}

/* ============================================================
   RESET & BASE
   ============================================================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }

body {
  font-family: var(--font-mono);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  color: var(--text-primary);
  background-color: var(--bg-primary);
  overflow-x: hidden;
}

::selection { background: #264f78; color: #fff; }

/* Custom scrollbar */
::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--bg-hover); border-radius: 5px; border: 2px solid var(--bg-primary); }
::-webkit-scrollbar-thumb:hover { background: #484f58; }

/* ============================================================
   LAYOUT
   ============================================================ */
.page {
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: var(--space-2xl) var(--space-xl);
}

/* ============================================================
   HERO
   ============================================================ */
.hero { padding: var(--space-3xl) 0 var(--space-2xl); }

.hero__badge {
  display: inline-flex; align-items: center; gap: 6px;
  font-size: var(--font-size-xs); color: var(--text-primary);
  background: var(--diff-green-bg); border: 1px solid var(--diff-green-border);
  padding: 4px 12px; border-radius: 999px; margin-bottom: var(--space-lg);
}
.hero__badge::before {
  content: ''; width: 8px; height: 8px; border-radius: 50%;
  background: var(--diff-green-accent); animation: pulse 2s ease-in-out infinite;
}
@keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }

.hero__name {
  font-family: var(--font-sans); font-size: var(--font-size-3xl);
  font-weight: 700; color: var(--text-primary);
  line-height: var(--line-height-tight); margin-bottom: var(--space-md);
}
.hero__subtitle {
  font-size: var(--font-size-lg); color: var(--text-secondary);
  margin-bottom: var(--space-md); max-width: 640px; font-family: var(--font-sans);
  line-height: var(--line-height-normal);
}
.hero__explainer {
  font-size: var(--font-size-sm); color: var(--text-muted);
  margin-bottom: var(--space-2xl); font-style: italic;
}

/* ============================================================
   DIFF BLOCKS
   ============================================================ */
.diff-block {
  background: var(--bg-secondary); border: 1px solid var(--border-primary);
  border-radius: var(--radius-md); overflow: hidden; margin-bottom: var(--space-xl);
}
.diff-block__header {
  display: flex; align-items: center; gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md); background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-primary); font-size: var(--font-size-sm);
  color: var(--text-tertiary);
}
.diff-block__header-icon {
  width: 16px; height: 16px; flex-shrink: 0;
  color: var(--text-tertiary);
}
.diff-block__filename { color: var(--text-primary); font-weight: 600; }
.diff-block__stats { margin-left: auto; display: flex; gap: var(--space-sm); font-size: var(--font-size-xs); }
.diff-block__additions { color: var(--diff-green-accent); }
.diff-block__deletions { color: var(--diff-red-accent); }

.diff-line {
  display: flex; padding: 2px var(--space-md); font-size: var(--font-size-sm);
  line-height: 1.7; border-left: 3px solid transparent;
}
.diff-line--removed {
  background: var(--diff-red-bg); border-left-color: var(--diff-red-accent);
  color: var(--text-secondary); border-left-style: dashed;
}
.diff-line--added {
  background: var(--diff-green-bg); border-left-color: var(--diff-green-accent);
  color: var(--text-primary); border-left-style: solid;
}
.diff-line--context { color: var(--text-tertiary); }
.diff-line__number {
  width: 48px; flex-shrink: 0; color: var(--text-muted);
  text-align: right; padding-right: var(--space-md);
  user-select: none; font-size: var(--font-size-xs);
}
.diff-line__prefix {
  width: 20px; flex-shrink: 0; user-select: none; font-weight: 700;
}
.diff-line--removed .diff-line__prefix { color: var(--diff-red-accent); }
.diff-line--added .diff-line__prefix { color: var(--diff-green-accent); }
.diff-line__content { flex: 1; white-space: pre-wrap; word-break: break-word; }

/* ============================================================
   STATS BAR
   ============================================================ */
.stats-bar {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 1px; background: var(--border-primary); border: 1px solid var(--border-primary);
  border-radius: var(--radius-md); overflow: hidden; margin: var(--space-2xl) 0;
}
.stat-cell {
  background: var(--bg-secondary); padding: var(--space-lg) var(--space-md);
  text-align: center; transition: background var(--transition-fast);
}
.stat-cell:hover { background: var(--bg-tertiary); }
.stat-cell__value {
  font-size: var(--font-size-xl); font-weight: 700;
  color: var(--diff-green-accent); display: block; font-family: var(--font-sans);
}
.stat-cell__label {
  font-size: var(--font-size-xs); color: var(--text-muted); margin-top: 4px; display: block;
}

/* ============================================================
   CONTRIBUTION GRAPH
   ============================================================ */
.contrib-graph {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
  margin-bottom: var(--space-xl);
}

.contrib-graph__header {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-primary);
  font-size: var(--font-size-sm);
  color: var(--text-tertiary);
}

.contrib-graph__header-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  color: var(--text-tertiary);
}

.contrib-graph__filename {
  color: var(--text-primary);
  font-weight: 600;
}

.contrib-graph__count {
  margin-left: auto;
  font-size: var(--font-size-xs);
  color: var(--text-muted);
}

.contrib-graph__count strong {
  color: var(--text-tertiary);
  font-weight: 600;
}

.contrib-graph__body {
  padding: var(--space-lg) var(--space-md);
  overflow-x: auto;
  overflow-y: hidden;
}

/* The graph wrapper holds day labels + grid + month labels */
.contrib-graph__wrapper {
  display: inline-flex;
  flex-direction: column;
  gap: var(--space-xs);
  min-width: max-content;
}

/* Month labels row */
.contrib-graph__months {
  display: flex;
  padding-left: 36px; /* offset for day labels column */
  font-size: 10px;
  color: var(--text-muted);
  user-select: none;
}

.contrib-graph__month-label {
  text-align: left;
  font-family: var(--font-sans);
}

/* Main grid area: day labels + cells */
.contrib-graph__grid-area {
  display: flex;
  gap: var(--space-xs);
}

/* Day of week labels */
.contrib-graph__day-labels {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 28px;
  flex-shrink: 0;
  padding: 0;
  font-size: 10px;
  color: var(--text-muted);
  font-family: var(--font-sans);
  user-select: none;
}

.contrib-graph__day-label {
  height: 11px;
  display: flex;
  align-items: center;
  line-height: 1;
}

/* The grid of cells */
.contrib-graph__grid {
  display: grid;
  grid-template-rows: repeat(7, 11px);
  grid-auto-flow: column;
  grid-auto-columns: 11px;
  gap: 3px;
}

.contrib-graph__cell {
  width: 11px;
  height: 11px;
  border-radius: 2px;
  outline: 1px solid rgba(27, 31, 35, 0.06);
  cursor: pointer;
  transition: transform 80ms ease, outline-color 80ms ease;
  position: relative;
}

.contrib-graph__cell:hover {
  transform: scale(1.35);
  outline-color: var(--text-muted);
  z-index: 2;
}

.contrib-graph__cell--level-0 { background: #21262d; }
.contrib-graph__cell--level-1 { background: #0e4429; }
.contrib-graph__cell--level-2 { background: #006d32; }
.contrib-graph__cell--level-3 { background: #26a641; }
.contrib-graph__cell--level-4 { background: #39d353; }

/* Footer: legend */
.contrib-graph__footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md) var(--space-md);
  font-size: 10px;
  color: var(--text-muted);
  font-family: var(--font-sans);
  user-select: none;
}

.contrib-graph__legend {
  display: flex;
  align-items: center;
  gap: 3px;
}

.contrib-graph__legend-label {
  margin: 0 4px;
}

.contrib-graph__legend-cell {
  width: 11px;
  height: 11px;
  border-radius: 2px;
}

/* ============================================================
   TOOLTIP
   ============================================================ */
.contrib-tooltip {
  position: fixed;
  pointer-events: none;
  z-index: 1000;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  padding: 6px 10px;
  font-size: 11px;
  font-family: var(--font-sans);
  color: var(--text-primary);
  white-space: nowrap;
  opacity: 0;
  transition: opacity 100ms ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.contrib-tooltip--visible {
  opacity: 1;
}

.contrib-tooltip__count {
  font-weight: 600;
}

.contrib-tooltip__date {
  color: var(--text-muted);
}

/* ============================================================
   MOCKUP ANNOTATION
   ============================================================ */
.mockup-annotation {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-primary);
  padding: 6px var(--space-md);
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 100;
}

.mockup-annotation__label {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.mockup-annotation__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--text-accent);
  opacity: 0.7;
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 768px) {
  .page { padding: var(--space-lg) var(--space-md); }
  .hero__name { font-size: var(--font-size-2xl); }
  .stats-bar { grid-template-columns: repeat(2, 1fr); }
  .diff-line__number { width: 32px; font-size: 10px; }
}

@media (max-width: 480px) {
  .stats-bar { grid-template-columns: 1fr 1fr; }
  .hero__name { font-size: 1.6rem; }
  .diff-line { font-size: var(--font-size-xs); }
}
</style>
</head>
<body>

<!-- Tooltip element (moved by JS) -->
<div class="contrib-tooltip" id="contrib-tooltip" aria-hidden="true">
  <span class="contrib-tooltip__count" id="tooltip-count"></span>
  <span class="contrib-tooltip__date" id="tooltip-date"></span>
</div>

<div class="page">
  <div class="hero">

    <!-- Badge -->
    <div class="hero__badge" aria-label="Status: Available for consulting and advisory">Available for consulting and advisory</div>

    <!-- Name & subtitle -->
    <h1 class="hero__name">Uri Kogan</h1>
    <p class="hero__subtitle">Product leader who builds to discover</p>
    <p class="hero__explainer">Product leader who builds &mdash; visualized as a code diff showing transformation</p>

    <!-- Hero diff block -->
    <div class="diff-block" aria-label="Highlights">
      <div class="diff-block__header">
        <!-- File icon SVG -->
        <svg class="diff-block__header-icon" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
          <path d="M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z"/>
        </svg>
        <span class="diff-block__filename">highlights.diff</span>
        <div class="diff-block__stats">
          <span class="diff-block__additions" aria-label="3 additions">+3</span>
          <span class="diff-block__deletions" aria-label="1 deletion">-1</span>
        </div>
      </div>
      <div class="diff-block__body">
        <div class="diff-line diff-line--removed" aria-label="Removed line">
          <span class="diff-line__number">1</span>
          <span class="diff-line__prefix">-</span>
          <span class="diff-line__content">Approach: Define requirements, hand to engineering, wait</span>
        </div>
        <div class="diff-line diff-line--added" aria-label="Added line">
          <span class="diff-line__number">1</span>
          <span class="diff-line__prefix">+</span>
          <span class="diff-line__content">Approach: Build working software &rarr; customer evidence &rarr; proven requirements</span>
        </div>
        <div class="diff-line diff-line--context">
          <span class="diff-line__number">2</span>
          <span class="diff-line__prefix"></span>
          <span class="diff-line__content"></span>
        </div>
        <div class="diff-line diff-line--added" aria-label="Added line">
          <span class="diff-line__number">3</span>
          <span class="diff-line__prefix">+</span>
          <span class="diff-line__content">Decades of GTM across buyers, sellers, and business models</span>
        </div>
        <div class="diff-line diff-line--added" aria-label="Added line">
          <span class="diff-line__number">4</span>
          <span class="diff-line__prefix">+</span>
          <span class="diff-line__content">From competitive strategy to working prototypes, no handoff required</span>
        </div>
      </div>
    </div>

    <!-- Stats bar -->
    <div class="stats-bar" aria-label="Key metrics">
      <div class="stat-cell">
        <span class="stat-cell__value" data-target="4">0</span>
        <span class="stat-cell__label">Zero-to-one products</span>
      </div>
      <div class="stat-cell">
        <span class="stat-cell__value" data-target="2">0</span>
        <span class="stat-cell__label">Successful exits</span>
      </div>
      <div class="stat-cell">
        <span class="stat-cell__value" data-target="15" data-suffix="+">0</span>
        <span class="stat-cell__label">Years product leadership</span>
      </div>
      <div class="stat-cell">
        <span class="stat-cell__value" data-target="5">0</span>
        <span class="stat-cell__label">VP+ roles</span>
      </div>
    </div>

    <!-- ============================================================
         CONTRIBUTION GRAPH
         This is the component being evaluated for placement.
         It uses the same diff-block card pattern as the rest of
         the site to feel native to the design system.
         ============================================================ -->
    <div class="contrib-graph" aria-label="Contribution activity graph">
      <div class="contrib-graph__header">
        <!-- Activity/graph SVG icon -->
        <svg class="contrib-graph__header-icon" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
          <path d="M1.5 1.75V13.5h13.75a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75V1.75a.75.75 0 0 1 1.5 0Zm14.28 2.53-5.25 5.25a.75.75 0 0 1-1.06 0L7 7.06 4.28 9.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.25-3.25a.75.75 0 0 1 1.06 0L10 7.94l4.72-4.72a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"/>
        </svg>
        <span class="contrib-graph__filename">contributions.graph</span>
        <span class="contrib-graph__count" id="contrib-count">
          <strong id="contrib-total">0</strong> contributions in the last year
        </span>
      </div>

      <div class="contrib-graph__body">
        <div class="contrib-graph__wrapper">
          <!-- Month labels (populated by JS) -->
          <div class="contrib-graph__months" id="month-labels" aria-hidden="true"></div>

          <div class="contrib-graph__grid-area">
            <!-- Day of week labels -->
            <div class="contrib-graph__day-labels" aria-hidden="true">
              <div class="contrib-graph__day-label"></div>
              <div class="contrib-graph__day-label">Mon</div>
              <div class="contrib-graph__day-label"></div>
              <div class="contrib-graph__day-label">Wed</div>
              <div class="contrib-graph__day-label"></div>
              <div class="contrib-graph__day-label">Fri</div>
              <div class="contrib-graph__day-label"></div>
            </div>

            <!-- Grid of cells (populated by JS) -->
            <div class="contrib-graph__grid" id="contrib-grid" role="group" aria-label="Contribution cells"></div>
          </div>
        </div>
      </div>

      <div class="contrib-graph__footer">
        <div class="contrib-graph__legend">
          <span class="contrib-graph__legend-label">Less</span>
          <div class="contrib-graph__legend-cell" style="background: #21262d;"></div>
          <div class="contrib-graph__legend-cell" style="background: #0e4429;"></div>
          <div class="contrib-graph__legend-cell" style="background: #006d32;"></div>
          <div class="contrib-graph__legend-cell" style="background: #26a641;"></div>
          <div class="contrib-graph__legend-cell" style="background: #39d353;"></div>
          <span class="contrib-graph__legend-label">More</span>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Status bar annotation -->
<div class="mockup-annotation" aria-hidden="true">
  <div class="mockup-annotation__label">
    <span class="mockup-annotation__dot"></span>
    MOCKUP -- contrib-graph-placement.html
  </div>
  <span>hero section / below stats bar</span>
</div>

<script>
(function () {
  'use strict';

  // ============================================================
  // DATA GENERATION
  // Generate 365 days of contribution data ending today.
  // Activity is sparse before Aug 2025 and concentrated after.
  // ============================================================

  var TOTAL_DAYS = 371; // 53 full weeks = 371 days
  var today = new Date();
  // Snap end date to the most recent Saturday (end of week in GitHub's graph)
  var endDate = new Date(today);
  var dayOfWeek = endDate.getDay();
  // GitHub weeks run Sun-Sat. We want the grid to end on the current Saturday.
  if (dayOfWeek < 6) {
    endDate.setDate(endDate.getDate() + (6 - dayOfWeek));
  }

  var startDate = new Date(endDate);
  startDate.setDate(startDate.getDate() - TOTAL_DAYS + 1);

  // Seeded pseudo-random for consistent results per session
  var seed = 42;
  function seededRandom() {
    seed = (seed * 16807) % 2147483647;
    return (seed - 1) / 2147483646;
  }

  /**
   * Weight function: determines how active a given date is.
   * - Before Aug 2025: low activity (mostly 0, occasional 1)
   * - Aug-Oct 2025: ramp up (mix of 0-2)
   * - Nov 2025 - Feb 2026: peak activity (0-4, weighted toward 2-4)
   * - Weekends are slightly less active
   */
  function getWeight(date) {
    var year = date.getFullYear();
    var month = date.getMonth(); // 0-indexed
    var dow = date.getDay(); // 0=Sun
    var isWeekend = (dow === 0 || dow === 6);

    var baseWeight;

    if (year < 2025 || (year === 2025 && month < 4)) {
      // Before May 2025: very sparse
      baseWeight = 0.08;
    } else if (year === 2025 && month >= 4 && month < 7) {
      // May-Jul 2025: light activity
      baseWeight = 0.2;
    } else if (year === 2025 && month >= 7 && month < 10) {
      // Aug-Oct 2025: ramping up
      baseWeight = 0.55;
    } else {
      // Nov 2025+: peak
      baseWeight = 0.8;
    }

    if (isWeekend) {
      baseWeight *= 0.4;
    }

    return baseWeight;
  }

  function generateLevel(date) {
    var w = getWeight(date);
    var r = seededRandom();

    if (r > w) return 0;

    // Among active days, distribute levels
    var r2 = seededRandom();
    if (w >= 0.7) {
      // Peak period: heavier toward 3-4
      if (r2 < 0.15) return 1;
      if (r2 < 0.35) return 2;
      if (r2 < 0.65) return 3;
      return 4;
    } else if (w >= 0.4) {
      // Ramp period
      if (r2 < 0.3) return 1;
      if (r2 < 0.6) return 2;
      if (r2 < 0.85) return 3;
      return 4;
    } else {
      // Low period
      if (r2 < 0.6) return 1;
      if (r2 < 0.85) return 2;
      return 3;
    }
  }

  // Generate the data
  var contributionData = [];
  var totalContributions = 0;
  var contributionCounts = []; // parallel array of fake "count" for tooltips

  for (var i = 0; i < TOTAL_DAYS; i++) {
    var date = new Date(startDate);
    date.setDate(date.getDate() + i);
    var level = generateLevel(date);

    // Generate a plausible count for the tooltip
    var count = 0;
    if (level === 1) count = Math.floor(seededRandom() * 3) + 1;      // 1-3
    else if (level === 2) count = Math.floor(seededRandom() * 4) + 4;  // 4-7
    else if (level === 3) count = Math.floor(seededRandom() * 5) + 8;  // 8-12
    else if (level === 4) count = Math.floor(seededRandom() * 8) + 13; // 13-20

    totalContributions += count;
    contributionData.push({ date: date, level: level, count: count });
  }

  // ============================================================
  // RENDER GRID
  // ============================================================

  var grid = document.getElementById('contrib-grid');

  var MONTH_NAMES = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                     'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

  // Track which weeks correspond to which months (for month labels)
  var weekMonths = []; // index = week column, value = month of first day of that week
  var currentWeek = -1;

  for (var i = 0; i < contributionData.length; i++) {
    var d = contributionData[i];
    var weekIndex = Math.floor(i / 7);

    if (weekIndex !== currentWeek) {
      currentWeek = weekIndex;
      weekMonths.push(d.date.getMonth());
    }

    var cell = document.createElement('div');
    cell.className = 'contrib-graph__cell contrib-graph__cell--level-' + d.level;
    cell.setAttribute('data-date', formatDate(d.date));
    cell.setAttribute('data-count', d.count);
    cell.setAttribute('data-level', d.level);
    cell.setAttribute('role', 'gridcell');
    cell.setAttribute('tabindex', '-1');
    cell.setAttribute('aria-label', d.count + ' contributions on ' + formatDate(d.date));
    grid.appendChild(cell);
  }

  // ============================================================
  // RENDER MONTH LABELS
  // Position labels at the start of each new month.
  // ============================================================

  var monthLabelsContainer = document.getElementById('month-labels');

  // Cell size = 11px, gap = 3px, so each column is 14px wide
  var COL_WIDTH = 14;

  var lastMonth = -1;
  for (var w = 0; w < weekMonths.length; w++) {
    if (weekMonths[w] !== lastMonth) {
      var label = document.createElement('span');
      label.className = 'contrib-graph__month-label';
      label.textContent = MONTH_NAMES[weekMonths[w]];

      // Calculate how many columns until the next month change (or end)
      var spanCols = 0;
      for (var w2 = w; w2 < weekMonths.length && weekMonths[w2] === weekMonths[w]; w2++) {
        spanCols++;
      }

      label.style.width = (spanCols * COL_WIDTH) + 'px';
      monthLabelsContainer.appendChild(label);
      lastMonth = weekMonths[w];
    }
  }

  // ============================================================
  // SET TOTAL COUNT
  // ============================================================

  document.getElementById('contrib-total').textContent = totalContributions;

  // ============================================================
  // TOOLTIP
  // ============================================================

  var tooltip = document.getElementById('contrib-tooltip');
  var tooltipCount = document.getElementById('tooltip-count');
  var tooltipDate = document.getElementById('tooltip-date');

  grid.addEventListener('mouseover', function (e) {
    var cell = e.target.closest('.contrib-graph__cell');
    if (!cell) return;

    var count = parseInt(cell.getAttribute('data-count'), 10);
    var dateStr = cell.getAttribute('data-date');

    if (count === 0) {
      tooltipCount.textContent = 'No contributions';
    } else if (count === 1) {
      tooltipCount.textContent = '1 contribution';
    } else {
      tooltipCount.textContent = count + ' contributions';
    }
    tooltipDate.textContent = ' on ' + formatDateLong(dateStr);

    tooltip.classList.add('contrib-tooltip--visible');

    var rect = cell.getBoundingClientRect();
    tooltip.style.left = (rect.left + rect.width / 2 - tooltip.offsetWidth / 2) + 'px';
    tooltip.style.top = (rect.top - tooltip.offsetHeight - 8) + 'px';
  });

  grid.addEventListener('mouseout', function (e) {
    var cell = e.target.closest('.contrib-graph__cell');
    if (!cell) return;
    tooltip.classList.remove('contrib-tooltip--visible');
  });

  function formatDate(date) {
    var y = date.getFullYear();
    var m = String(date.getMonth() + 1).padStart(2, '0');
    var d = String(date.getDate()).padStart(2, '0');
    return y + '-' + m + '-' + d;
  }

  function formatDateLong(dateStr) {
    var parts = dateStr.split('-');
    var monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                      'July', 'August', 'September', 'October', 'November', 'December'];
    var monthIndex = parseInt(parts[1], 10) - 1;
    var day = parseInt(parts[2], 10);
    return monthNames[monthIndex] + ' ' + day + ', ' + parts[0];
  }

  // ============================================================
  // STAT COUNTER ANIMATION
  // ============================================================

  function animateCounters() {
    var counters = document.querySelectorAll('.stat-cell__value[data-target]');
    counters.forEach(function (el) {
      var target = parseInt(el.getAttribute('data-target'), 10);
      var suffix = el.getAttribute('data-suffix') || '';
      var duration = 800;
      var startTime = null;

      function step(timestamp) {
        if (!startTime) startTime = timestamp;
        var progress = Math.min((timestamp - startTime) / duration, 1);
        // Ease out cubic
        var eased = 1 - Math.pow(1 - progress, 3);
        var current = Math.round(eased * target);
        el.textContent = current + suffix;
        if (progress < 1) {
          requestAnimationFrame(step);
        }
      }

      requestAnimationFrame(step);
    });
  }

  // Also animate the contribution total
  function animateContribTotal() {
    var el = document.getElementById('contrib-total');
    var target = totalContributions;
    var duration = 1200;
    var startTime = null;

    function step(timestamp) {
      if (!startTime) startTime = timestamp;
      var progress = Math.min((timestamp - startTime) / duration, 1);
      var eased = 1 - Math.pow(1 - progress, 3);
      el.textContent = Math.round(eased * target);
      if (progress < 1) {
        requestAnimationFrame(step);
      }
    }

    requestAnimationFrame(step);
  }

  // Trigger animations after a short delay so the page feels loaded
  setTimeout(function () {
    animateCounters();
    animateContribTotal();
  }, 300);

})();
</script>
</body>
</html>
